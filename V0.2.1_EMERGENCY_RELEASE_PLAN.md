# v0.2.1 緊急リリース計画

**発見日**: 2025年5月18日  
**問題レベル**: クリティカル  
**目標**: Python要件を修正したv0.2.1を即座にリリース

## 問題詳細

### 現在の状況
- v0.2.0がPyPIに公開済み
- PyPI上のメタデータ: `requires_python='>=3.12'`
- 本来の設計: `requires_python='>=3.10'`
- **結果**: 多くのユーザー環境でインストール不可能

### 影響範囲
- Python 3.10および3.11ユーザーはインストール不可
- Docker使用またはPython 3.12にアップグレードが必要
- プロジェクトの採用率に悪影響の可能性

## 緊急対応アクション

### 1. 即時対応（今すぐ）

#### setup.pyの確認と修正
```python
# setup.pyの確認
python_requires='>=3.10'  # 正しい設定を確認
```

#### 回避策の文書化
```markdown
# README.mdに追加
## インストールの問題（v0.2.0）

v0.2.0は誤ってPython 3.12以上を要求しています。

### 回避策
1. Dockerを使用:
   ```dockerfile
   FROM python:3.12
   RUN pip install shopify-mcp-server==0.2.0
   ```

2. pyenvでPython 3.12をインストール:
   ```bash
   pyenv install 3.12.7
   pyenv local 3.12.7
   pip install shopify-mcp-server==0.2.0
   ```

v0.2.1で修正予定です。
```

### 2. v0.2.1リリース準備（2時間以内）

#### バージョンファイルの更新
```python
# src/_version.py
__version__ = '0.2.1'
```

#### setup.pyの確認
```python
setup(
    name="shopify-mcp-server",
    version="0.2.1",
    python_requires='>=3.10',  # 明示的に設定
    # ...
)
```

#### パッケージングとテスト
```bash
# クリーンビルド
rm -rf dist/ build/ *.egg-info/
python -m build

# メタデータ確認
tar -tf dist/shopify_mcp_server-0.2.1.tar.gz | grep -E "(PKG-INFO|setup.py)"
tar -xOf dist/shopify_mcp_server-0.2.1.tar.gz '*/PKG-INFO' | grep Requires-Python

# テストPyPIへのアップロード（オプション）
python -m twine upload --repository testpypi dist/*
```

### 3. 本番リリース（4時間以内）

```bash
# PyPIへのアップロード
python -m twine upload dist/*

# インストールテスト（Python 3.10環境で）
pip install --upgrade shopify-mcp-server==0.2.1
```

### 4. コミュニケーション（リリース後即座に）

#### リリースノート（v0.2.1）
```markdown
# v0.2.1 - Python要件修正

## 重要な修正
- Python要件を>=3.10に修正（v0.2.0の>=3.12から変更）
- v0.2.0のインストール問題を解決

## インストール
```bash
pip install shopify-mcp-server==0.2.1
```

v0.2.0でインストール問題を経験した方は、このバージョンに更新してください。
```

## チェックリスト

- [ ] setup.pyでpython_requires='>=3.10'を確認
- [ ] _version.pyを0.2.1に更新
- [ ] README.mdに回避策を追加
- [ ] クリーンビルドの実行
- [ ] メタデータの確認
- [ ] テストPyPIでの検証（オプション）
- [ ] 本番PyPIへのアップロード
- [ ] インストールテスト（複数のPythonバージョンで）
- [ ] リリースノートの公開
- [ ] GitHubリリースの作成

## 長期的な改善

1. **CI/CDパイプラインの強化**
   - パッケージメタデータの自動検証
   - 複数Pythonバージョンでのインストールテスト

2. **リリースプロセスの改善**
   - メタデータとsetup.pyの一致性チェック
   - プレリリーステストの強化

3. **ドキュメントの更新**
   - 明確なPythonバージョン要件の記載
   - トラブルシューティングセクションの追加

## 結論

v0.2.1の緊急リリースでPython要件の問題を解決し、より多くのユーザーが利用できるようにします。今後はリリースプロセスを改善し、このような問題の再発を防ぎます。